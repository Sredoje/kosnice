<p id="notice"><%= notice %></p>

<h1>Apiaries</h1>
<div class="row">
	<% @apiaries.each do |apiary| %>
	<div class="row">
		<div class="apiary-header">
			<h2>
				<%= apiary.name %>
			</h2>
			<%= link_to 'Edit', edit_apiary_path(apiary) %>
			<%= link_to 'Destroy', apiary, method: :delete, data: { confirm: 'Are you sure?' } %>
		</div>
		
		<p>Location:</p>
		<div id="map"></div>
   		<% if apiary.hives %>
   		<h3>Hives</h3>
   		<div class="hives">
   			<div class="scrollable">
			<% apiary.hives.each do |hive| %>
				<div class="hive col-lg-2">
					<div class="extensions col-lg-12 padding-none">
						<% hive.extensions.each do |extension|%>
						<div class="extension <%= extension.state %>" data-toggle="popover" title="Edit extension" data-state="<%= extension.state %>" data-extension-id="<%= extension.id %>">
							<div class="center-extension">
							<% extension.frames.each do |frame|%>
								<div class="frame type-<%= frame.frame_type %>" data-id="<%= frame.id %>"></div>
							<% end %>
							</div>
						</div>
						<% end %>
					</div>
					<div class="hive-number"><%= hive.number %></div>
					<% if hive.extensions.count < 3 %>
						<%= form_tag('/extensions', remote: true, method: 'create') do %>
							<%= hidden_field_tag 'extension[hive_id]', hive.id %>
							<%= link_to "Add extension", 'javascript:void(0)', class: "add_extension" %>
						<% end %>
					<% end %> 
				</div>
			<% end %>
			</div>
		</div>
	<% end %>
 </div>
 <% end %>

<!-- <script async defer
//         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFYK-bGfNzEBwEc0zXf1tXxEmjnQrFW7g&callback=initMap"></script>
<br> -->
<%= link_to 'New Apiary', new_apiary_path %>

<%= link_to 'New Hive', new_hive_path %>